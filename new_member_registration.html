<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Member Registration - Seahawk Sports Club</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            font-size: 18px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .header p {
            font-size: 18px;
            opacity: 0.95;
            line-height: 1.5;
        }

        .form-container {
            padding: 30px 25px;
        }

        .section-title {
            font-size: 24px;
            color: #667eea;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid #667eea;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
            font-size: 18px;
            line-height: 1.4;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 18px;
            transition: all 0.3s ease;
            line-height: 1.5;
            -webkit-appearance: none;
            appearance: none;
        }

        .form-group select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
        }

        .form-group small {
            display: block;
            margin-top: 8px;
            color: #666;
            font-size: 16px;
            line-height: 1.4;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 12px;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 18px;
            min-height: 50px;
        }

        .checkbox-group label:hover {
            background-color: #f5f7ff;
            border-color: #667eea;
        }

        /* Custom checkbox styling for paddling side */
        .checkbox-group input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            margin-right: 12px;
            cursor: pointer;
            flex-shrink: 0;
            border: 3px solid #667eea;
            border-radius: 6px;
            background-color: white;
            position: relative;
            transition: all 0.3s ease;
        }

        .checkbox-group input[type="checkbox"]:hover {
            border-color: #764ba2;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .checkbox-group input[type="checkbox"]:checked {
            background-color: #667eea;
            border-color: #667eea;
        }

        .checkbox-group input[type="checkbox"]:checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 20px;
            font-weight: bold;
        }

        .checkbox-group input[type="checkbox"]:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.25);
        }

        /* Highlight the label when checkbox is checked */
        .checkbox-group input[type="checkbox"]:checked + span {
            font-weight: 600;
            color: #667eea;
        }

        /* Update label structure to work with the new checkbox styling */
        .checkbox-group label span {
            transition: all 0.3s ease;
        }

        .terms-box {
            background-color: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .terms-box p {
            font-size: 17px;
            line-height: 1.6;
            color: #333;
            margin: 0;
        }

        .terms-acceptance {
            display: flex;
            align-items: flex-start;
            padding: 18px;
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .terms-acceptance input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .terms-acceptance label {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            line-height: 1.5;
        }

        .submit-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            margin-top: 10px;
            min-height: 60px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            padding: 18px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            font-size: 18px;
            line-height: 1.5;
            font-weight: 500;
        }

        .message.success {
            background-color: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .message.error {
            background-color: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .loading p {
            font-size: 18px;
            margin-top: 15px;
            color: #667eea;
            font-weight: 500;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-box {
            background-color: #e7f3ff;
            border-left: 5px solid #667eea;
            padding: 18px;
            margin-bottom: 25px;
            border-radius: 8px;
        }

        .info-box p {
            margin: 8px 0;
            color: #333;
            font-size: 17px;
            line-height: 1.6;
        }

        .info-box strong {
            color: #667eea;
            font-weight: 600;
        }

        .form-group label.required::after {
            content: " *";
            color: #dc3545;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .form-container {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 28px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .submit-btn {
                font-size: 19px;
                padding: 18px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö£ Member Registration</h1>
            <p>Seahawk Sports Club - Join Our Team</p>
        </div>

        <div class="form-container">
            <div id="message" class="message" role="alert" aria-live="polite"></div>
            <div id="loading" class="loading" role="status" aria-live="polite">
                <div class="spinner"></div>
                <p>Submitting your registration...</p>
            </div>

            <div class="info-box">
                <p><strong>üìå Note:</strong> All fields marked with * are required.</p>
                <p><strong>üí° Tip:</strong> You can update your information by submitting the form again with the same name.</p>
            </div>

            <form id="memberRegistrationForm">
                <!-- Personal Information Section -->
                <div class="section-title">üë§ Personal Information</div>

                <div class="form-group">
                    <label for="fullName" class="required">Full Name (as per NRIC)</label>
                    <input type="text" id="fullName" name="fullName" required aria-required="true">
                </div>

                <div class="form-group">
                    <label for="preferredName">Preferred Name (optional)</label>
                    <input type="text" id="preferredName" name="preferredName">
                </div>

                <div class="form-group">
                    <label for="nric" class="required">Full NRIC</label>
                    <input type="text" id="nric" name="nric" required aria-required="true" placeholder="S1234567A">
                    <small>Format: S1234567A</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="gender" class="required">Gender</label>
                        <select id="gender" name="gender" required aria-required="true">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dob" class="required">Date of Birth</label>
                        <input type="date" id="dob" name="dob" required aria-required="true">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jerseySize" class="required">Jersey Size</label>
                        <select id="jerseySize" name="jerseySize" required aria-required="true">
                            <option value="">Select Size</option>
                            <option value="XS">XS</option>
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                            <option value="XXL">XXL</option>
                            <option value="XXXL">XXXL</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="weight" class="required">Weight (kg)</label>
                        <input type="number" id="weight" name="weight" min="30" max="200" step="0.1" required aria-required="true" inputmode="decimal">
                        <small>Helps with boat balancing</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="postalCode" class="required">Postal Code</label>
                        <input type="text" id="postalCode" name="postalCode" required aria-required="true" pattern="\d{6}" placeholder="123456" inputmode="numeric">
                        <small>6-digit Singapore postal code</small>
                    </div>

                    <div class="form-group">
                        <label for="nationality" class="required">Nationality</label>
                        <input type="text" id="nationality" name="nationality" required aria-required="true" placeholder="e.g., Singaporean, Malaysian">
                    </div>
                </div>

                <div class="form-group">
                    <label for="ethnicity" class="required">Ethnicity</label>
                    <select id="ethnicity" name="ethnicity" required aria-required="true">
                        <option value="">Select Ethnicity</option>
                        <option value="Chinese">Chinese</option>
                        <option value="Malay">Malay</option>
                        <option value="Indian">Indian</option>
                        <option value="Eurasian">Eurasian</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="contactNumber" class="required">Contact Number</label>
                    <input type="tel" id="contactNumber" name="contactNumber" required aria-required="true" inputmode="tel" placeholder="81234567">
                    <small>8-10 digits, no spaces or dashes</small>
                </div>

                <div class="form-group">
                    <label for="email" class="required">Email Address</label>
                    <input type="email" id="email" name="email" required aria-required="true" inputmode="email">
                </div>

                <div class="form-group">
                    <label for="medicalHistory">Medical History</label>
                    <textarea id="medicalHistory" name="medicalHistory" rows="1" placeholder=""></textarea>
                </div>

                <!-- Emergency Contact Section -->
                <div class="section-title">üö® Emergency Contact</div>

                <div class="form-group">
                    <label for="emergencyContactName" class="required">Emergency Contact Name</label>
                    <input type="text" id="emergencyContactName" name="emergencyContactName" required aria-required="true">
                </div>

                <div class="form-group">
                    <label for="emergencyRelationship" class="required">Relationship</label>
                    <select id="emergencyRelationship" name="emergencyRelationship" required aria-required="true">
                        <option value="">Select Relationship</option>
                        <option value="Parent">Parent</option>
                        <option value="Spouse">Spouse</option>
                        <option value="Sibling">Sibling</option>
                        <option value="Child">Child</option>
                        <option value="Friend">Friend</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="emergencyContactNumber" class="required">Emergency Contact Number</label>
                    <input type="tel" id="emergencyContactNumber" name="emergencyContactNumber" required aria-required="true" inputmode="tel" placeholder="81234567">
                    <small>8-10 digits, no spaces or dashes</small>
                </div>

                <!-- Experience/Certification Section -->
                <div class="section-title">üèÜ Experience/Certification</div>

                <div class="form-group">
                    <label class="required">Paddling Side</label>
                    <div class="checkbox-group" role="group" aria-label="Select your paddling side">
                        <label>
                            <input type="checkbox" name="paddlingSide" value="LEFT" aria-label="Left side">
                            <span>Left</span>
                        </label>
                        <label>
                            <input type="checkbox" name="paddlingSide" value="RIGHT" aria-label="Right side">
                            <span>Right</span>
                        </label>
                    </div>
                    <small>Select the side(s) you can paddle on (you can select both)</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="certifiedHelmsman" class="required">Certified Helmsman</label>
                        <select id="certifiedHelmsman" name="certifiedHelmsman" required aria-required="true">
                            <option value="">Select Option</option>
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="certifiedCoach" class="required">Certified Coach</label>
                        <select id="certifiedCoach" name="certifiedCoach" required aria-required="true">
                            <option value="">Select Level</option>
                            <option value="None">None</option>
                            <option value="R1">R1</option>
                            <option value="L1">L1</option>
                            <option value="L2">L2</option>
                            <option value="L3">L3</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="swimmingAbility" class="required">Can you swim? (with Personal Floatation Device)</label>
                    <select id="swimmingAbility" name="swimmingAbility" required aria-required="true">
                        <option value="">Select Option</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                        <option value="Can swim, cannot tread water">Can swim, cannot tread water</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sdbaCard">SDBA Card Number</label>
                    <input type="text" id="sdbaCard" name="sdbaCard" placeholder="">
                    <small>Enter 'Nil' if you don't have an SDBA card</small>
                </div>

                <!-- Terms and Conditions Section -->
                <div class="section-title">üìã Terms and Conditions</div>

                <div class="terms-box">
                    <p>By registering, you agree to abide by the club's safety rules, training commitments, and code of conduct. You also consent to the collection and use of your personal data for administrative and race-related purposes.</p>
                </div>

                <div class="terms-acceptance">
                    <input type="checkbox" id="termsAccepted" name="termsAccepted" required aria-required="true">
                    <label for="termsAccepted">I have read and agree to the Terms and Conditions *</label>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn" aria-label="Submit member registration">
                    Submit Registration
                </button>
            </form>
        </div>
    </div>

    <script>
        // ‚úÖ Configuration
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwDDbIkH3pczW4nJGFhwIXSZaaCIBiYkz4MPrWXVVYbTFNaxyh-ZQPQZtY7iTrKHdIkBg/exec';

        // ‚úÖ Setup form on page load
        document.addEventListener('DOMContentLoaded', function() {
            setupFormHandlers();
        });

        // ‚úÖ Setup form handlers
        function setupFormHandlers() {
            const form = document.getElementById('memberRegistrationForm');
            const submitBtn = document.getElementById('submitBtn');
            const messageDiv = document.getElementById('message');
            const loadingDiv = document.getElementById('loading');

            // Form submission
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Validate NRIC format
                const nric = document.getElementById('nric').value.trim();
                const nricPattern = /^[STFGM]\d{7}[A-Z]$/;
                if (!nricPattern.test(nric)) {
                    showMessage('‚ùå Invalid NRIC format. Please use format: S1234567A', 'error');
                    document.getElementById('nric').focus();
                    return;
                }

                // Validate email format
                const email = document.getElementById('email').value.trim();
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailPattern.test(email)) {
                    showMessage('‚ùå Invalid email format. Please enter a valid email address.', 'error');
                    document.getElementById('email').focus();
                    return;
                }

                // Validate contact number
                const contactNumber = document.getElementById('contactNumber').value.trim();
                const phonePattern = /^\d{8,10}$/;
                if (!phonePattern.test(contactNumber)) {
                    showMessage('‚ùå Invalid contact number. Please enter 8-10 digits without spaces or dashes.', 'error');
                    document.getElementById('contactNumber').focus();
                    return;
                }

                // Validate emergency contact number
                const emergencyContactNumber = document.getElementById('emergencyContactNumber').value.trim();
                if (!phonePattern.test(emergencyContactNumber)) {
                    showMessage('‚ùå Invalid emergency contact number. Please enter 8-10 digits without spaces or dashes.', 'error');
                    document.getElementById('emergencyContactNumber').focus();
                    return;
                }

                // Validate postal code
                const postalCode = document.getElementById('postalCode').value.trim();
                const postalPattern = /^\d{6}$/;
                if (!postalPattern.test(postalCode)) {
                    showMessage('‚ùå Invalid postal code. Please enter a 6-digit postal code.', 'error');
                    document.getElementById('postalCode').focus();
                    return;
                }

                // Validate paddling side selection
                const paddlingSideCheckboxes = document.querySelectorAll('input[name="paddlingSide"]:checked');
                if (paddlingSideCheckboxes.length === 0) {
                    showMessage('‚ùå Please select at least one paddling side.', 'error');
                    document.querySelector('input[name="paddlingSide"]').focus();
                    return;
                }

                // Validate terms acceptance
                const termsAccepted = document.getElementById('termsAccepted').checked;
                if (!termsAccepted) {
                    showMessage('‚ùå Please read and accept the Terms and Conditions to continue.', 'error');
                    document.getElementById('termsAccepted').focus();
                    return;
                }

                // Show loading state
                submitBtn.disabled = true;
                loadingDiv.style.display = 'block';
                messageDiv.style.display = 'none';

                // Collect form data
                const formData = new FormData(form);

                // Handle paddling side checkboxes
                const paddlingSides = Array.from(paddlingSideCheckboxes).map(cb => cb.value);
                formData.set('paddlingSide', paddlingSides.join(', '));

                // Add action
                formData.append('action', 'registerMember');

                try {
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        body: formData
                    });

                    const result = await response.text();

                    if (result === 'Success') {
                        showMessage('‚úÖ Registration successful! Welcome to Seahawk Sports Club! üéâ', 'success');
                        form.reset();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else if (result === 'Success - Updated') {
                        showMessage('‚úÖ Your information has been updated successfully! üéâ', 'success');
                        form.reset();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else {
                        showMessage('‚ùå Error: ' + result, 'error');
                    }
                } catch (error) {
                    showMessage('‚ùå Network error. Please check your connection and try again.', 'error');
                    console.error('Error:', error);
                } finally {
                    submitBtn.disabled = false;
                    loadingDiv.style.display = 'none';
                }
            });
        }

        // ‚úÖ Show message function
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = 'message ' + type;
            messageDiv.style.display = 'block';

            // Scroll to message
            messageDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            // Auto-hide success messages after 8 seconds
            if (type === 'success') {
                setTimeout(() => {
                    messageDiv.style.display = 'none';
                }, 8000);
            }
        }
    </script>
</body>
</html>


